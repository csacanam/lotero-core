# =============================================================================
# Lotero Agent – Environment variables
# =============================================================================
# Copy to .env and fill required values. See README for setup steps.
# =============================================================================

# ─── Required: Core ────────────────────────────────────────────────────────

# SlotMachineV2 contract address on Base (from deploy output or DEPLOY_BASE.md)
SLOT_MACHINE_ADDRESS=0x...

# Executor wallet private key. This wallet:
#   - Signs spin/claim transactions
#   - Pays gas (ETH) and bet (1 USDC per spin via playFor)
#   - Must hold ETH + USDC on Base
EXECUTOR_PRIVATE_KEY=0x...

# Wallet that receives x402 payments (typically same as executor)
PAY_TO=0x...

# ─── Required: x402 / CDP facilitator ───────────────────────────────────────

# Create Secret API Keys at https://portal.cdp.coinbase.com/projects/api-keys
# Required when using Coinbase facilitator (mainnet default)
CDP_API_KEY_ID=
CDP_API_KEY_SECRET=

# ─── Optional: Server ──────────────────────────────────────────────────────

PORT=4021
BASE_RPC=https://mainnet.base.org
FACILITATOR_URL=https://api.cdp.coinbase.com/platform/v2/x402

# ─── Optional: VRF subscription (Chainlink) ─────────────────────────────────

# If set, agent validates VRF balance before each spin. Get ID from vrf.chain.link
VRF_SUBSCRIPTION_ID=

# VRF coordinator on Base mainnet (default shown)
VRF_COORDINATOR=0xd5D517aBE5cF79B7e95eC98dB0f0277788aFF634

# Override spin-validation thresholds (defaults come from utils/constants.js):
#   VRF_MIN_NATIVE_ETH: min ETH in subscription when useNativePayment (default: 0.001)
#   MIN_SUBSCRIPTION_LINK_JUELS: min LINK in juels (1e18 = 1 LINK, default: 0.3 LINK)
# VRF_MIN_NATIVE_ETH=0.001
# MIN_SUBSCRIPTION_LINK_JUELS=300000000000000000

# ─── Optional: Rate limits ──────────────────────────────────────────────────

# RATE_LIMIT_WINDOW_MS: time window in ms (60000 = 1 min)
# RATE_LIMIT_MAX: max requests per IP to read-only routes (GET /, /round, /player, /contract/health, /cron/*). Default: 60/min
# RATE_LIMIT_NO_PAYMENT_MAX: max requests per IP to spin/claim without payment header (prevents 402 spam). Default: 10/min
# RATE_LIMIT_WINDOW_MS=60000
# RATE_LIMIT_MAX=60
# RATE_LIMIT_NO_PAYMENT_MAX=10

# ─── Optional: Telegram alerts (cron health) ─────────────────────────────────

# When GET /cron/health runs, sends alerts when ETH low, USDC buffer low, VRF LINK low.
# Create bot: @BotFather → /newbot → copy token.
# Get chat_id: message @userinfobot or send a message to your bot.
# TELEGRAM_BOT_TOKEN=
# TELEGRAM_CHAT_ID=

# ─── ACP (Virtuals Agent Commerce Protocol) ───────────────────────────────────

# Required to run acp:seller. Get from ACP agent profile at app.virtuals.io/acp/join
# ACP_SELLER_WHITELISTED_WALLET_PRIVATE_KEY=0x...
# ACP_SELLER_ENTITY_ID=
# ACP_SELLER_AGENT_WALLET_ADDRESS=

# Required to run acp:buyer. Same registrar at app.virtuals.io/acp/join (buyer entity)
# ACP_BUYER_WHITELISTED_WALLET_PRIVATE_KEY=0x...
# ACP_BUYER_ENTITY_ID=
# ACP_BUYER_AGENT_WALLET_ADDRESS=
# ACP_TARGET_AGENT_KEYWORD=lotero  # optional, default: lotero
# ACP_SELLER_AGENT_WALLET_ADDRESS=0x...  # optional, filters to your Lotero seller (same as seller's agent wallet)
# ACP_BUYER_DEBUG=1  # optional, only discover agent and exit (no job execution) - for debugging

# ─── Scripts only (spin-paid.js, claim-paid.js) ──────────────────────────────

# Wallet that pays x402 for test spins/claims (must have USDC on Base)
# PAYER_PRIVATE_KEY=0x...
